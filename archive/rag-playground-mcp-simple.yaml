apiVersion: v1
kind: Pod
metadata:
  name: rag-playground-mcp-simple
  namespace: default
  labels:
    app: rag-playground-mcp
spec:
  restartPolicy: Always
  containers:
  - name: playground-mcp
    image: node:18-alpine
    ports:
    - containerPort: 3000
    command: ["sh", "-c"]
    args:
      - |
        echo "ðŸ”Œ Starting RAG Playground with MCP Services Toggle..."
        echo "Installing serve package..."
        npm install -g serve
        
        echo "Creating application directory..."
        mkdir -p /app
        cd /app
        
        echo "Copying built application from host..."
        cp -r /host-build/.next ./
        cp -r /host-build/public ./
        cp /host-build/package.json ./
        cp /host-build/next.config.ts ./
        
        echo "ðŸ”Œ MCP Services toggle is now available in Settings!"
        echo "Starting production server on port 3000..."
        npx serve -s . -l 3000 --single
    volumeMounts:
    - name: host-build
      mountPath: /host-build
    resources:
      limits:
        cpu: "1000m"
        memory: "1Gi"
      requests:
        cpu: "500m"
        memory: "512Mi"
    env:
    - name: NODE_ENV
      value: "production"
    - name: MCP_TOGGLE_ENABLED
      value: "true"
  volumes:
  - name: host-build
    hostPath:
      path: /Users/mike/phaser/nvidia-rag-frontend
      type: Directory
---
apiVersion: v1
kind: Service
metadata:
  name: rag-playground-mcp-simple-service
  namespace: default
spec:
  selector:
    app: rag-playground-mcp
  ports:
  - port: 3000
    targetPort: 3000
    nodePort: 30082
    protocol: TCP
  type: NodePort
