all:
  hosts:
{% for host in groups['kube_control_plane'] %}
    {{ host }}:
      ansible_host: {{ hostvars[host]['ansible_host'] }}
      ansible_user: {{ hostvars[host]['ansible_user'] }}
      ansible_ssh_private_key_file: {{ hostvars[host]['ansible_ssh_private_key_file'] }}
      ansible_ssh_common_args: {{ hostvars[host]['ansible_ssh_common_args'] }}
      ip: {{ hostvars[host]['ansible_host'] }}
      access_ip: {{ hostvars[host]['ansible_host'] }}
{% endfor %}
{% for host in groups['kube_node'] %}
    {{ host }}:
      ansible_host: {{ hostvars[host]['ansible_host'] }}
      ansible_user: {{ hostvars[host]['ansible_user'] }}
      ansible_ssh_private_key_file: {{ hostvars[host]['ansible_ssh_private_key_file'] }}
      ansible_ssh_common_args: {{ hostvars[host]['ansible_ssh_common_args'] }}
      ip: {{ hostvars[host]['ansible_host'] }}
      access_ip: {{ hostvars[host]['ansible_host'] }}
{% endfor %}
  children:
    kube_control_plane:
      hosts:
{% for host in groups['kube_control_plane'] %}
        {{ host }}:
{% endfor %}
    kube_node:
      hosts:
{% for host in groups['kube_node'] %}
        {{ host }}:
{% endfor %}
    k8s_cluster:
      children:
        kube_control_plane:
        kube_node:
    calico_rr:
      hosts: {}
